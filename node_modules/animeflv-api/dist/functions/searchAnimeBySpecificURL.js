"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.searchAnimesBySpecificURL = void 0;
const cheerio_1 = require("cheerio");
const cloudscraper_1 = __importDefault(require("cloudscraper"));
const constants_1 = require("../constants");
const utils_1 = require("../utils");
async function searchAnimesBySpecificURL(url) {
    try {
        constants_1.CloudscraperOptions.uri = url;
        const specificData = (await (0, cloudscraper_1.default)(constants_1.CloudscraperOptions));
        const $ = (0, cheerio_1.load)(specificData);
        const specific = {
            previousPage: null,
            nextPage: null,
            foundPages: 0,
            data: []
        };
        specific.data = (0, utils_1.scrapSearchAnimeData)($);
        const pageSelector = $('body > div.Wrapper > div > div > main > div > ul > li');
        if (pageSelector.eq(0).children('a').attr('href') === "#")
            specific.previousPage = null;
        else
            specific.previousPage = 'https://www3.animeflv.net' + pageSelector.eq(0).children('a').attr('href');
        if (pageSelector.last().children('a').attr('href') === "#")
            specific.nextPage = null;
        else
            specific.nextPage = 'https://www3.animeflv.net' + pageSelector.last().children('a').attr('href');
        specific.foundPages = Number(pageSelector.last().prev().find('a').text());
        return specific;
    }
    catch {
        return null;
    }
}
exports.searchAnimesBySpecificURL = searchAnimesBySpecificURL;
